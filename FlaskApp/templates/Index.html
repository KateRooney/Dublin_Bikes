<!DOCTYPE html>
<html>   
<head>
<!--example of url_for for stylesheets here: https://www.youtube.com/watch?v=8aTgOs_cv2g&list=PLQVvvaa0QuDc_owjTbIY4rbgXOFkUYOUB&index=3-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="{{url_for('static',
    filename='CSS_bikes.css') }}" rel="stylesheet" >
     <link rel="icon" href="{{url_for('static',
    filename='icon.ico') }}" rel="stylesheet" >
     <title>Dublin Bikes Team13</title>
    </head>
     <body>
         
            
         <div id="container">
         <div id="article">
      <div id="map" style="width:800px;height:900px;"> </div>
             </div>
         <div id="articleright"></div>
             <div id="php_placeholder"></div>
          </div>

<!--sourced example for mulitple markers from here: https://developers.google.com/maps/documentation/javascript/examples/icon-complex-->
        <!-- https://hashnode.com/post/google-maps-api-onclick-on-marker-close-infowindow-of-other-markers-ciou68dw708x33353les71nyi-->

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCEmlHrsfVqNd08B7msqSlM-KxogOEjo8g&callback=initMap"></script>
<script>
    
var xmlhttp = new XMLHttpRequest();
var url = "http://api.openweathermap.org/data/2.5/forecast?id=7778677&units=metric&APPID=7dc97eec8449218feec4838d26264d0b";
xmlhttp.onreadystatechange = function() {
if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
displayJSON(xmlhttp.responseText);}
    
xmlhttp.open("GET", url, true);
xmlhttp.send();
 
function displayJSON(obj) {
var obj = JSON.parse(obj)
var list=obj.list;
var i
var output = "<table>";
for (var i=0; i<list.length; i+=8) 
{var date = new Date((obj.list[i].dt)*1000);
var temp = obj.list[i].main.temp;
var icon = obj.list[i].weather[0].icon;
var iconshow = ("<img src='http://openweathermap.org/img/w/" + icon + ".png'>");
output += "<tr><td>" +date.toDateString()+" "+iconshow+temp +"Â°C"+"</td></tr>";}
output +="</table>";
document.getElementById("articleright").innerHTML= output;}
    
var locations=[
[53.349562, -6.278198, 'SMITHFIELD NORTH'],
[53.353462, -6.265305, 'PARNELL SQUARE NORTH'],
[53.344304, -6.250427, 'PEARSE STREET'],
[53.347777, -6.244239, 'EXCISE WALK'],
[53.336074, -6.252825, 'FITZWILLIAM SQUARE WEST'],
[53.339983, -6.295594, 'ST. JAMES HOSPITAL (CENTRAL)'],
[53.344115, -6.237153, 'HANOVER QUAY'],
[53.343893, -6.280531, 'OLIVER BOND STREET'],
[53.347477, -6.28525, 'COLLINS BARRACKS MUSEUM'],
[53.339005, -6.300217, 'BROOKFIELD ROAD'],
[53.336021, -6.26298, 'CLONMEL STREET'],
[53.336485, -6.248174, 'JAMES STREET EAST'],
[53.33796, -6.24153, 'MOUNT STREET LOWER'],
[53.343368, -6.27012, 'CHRISTCHURCH PLACE'],
[53.334123, -6.265436, 'GRANTHAM STREET'],
[53.338755, -6.262003, 'YORK STREET EAST'],
[53.330091, -6.268044, 'PORTOBELLO ROAD'],
[53.350929, -6.265125, 'PARNELL STREET'],
[53.341515, -6.256853, 'FREDERICK STREET SOUTH'],
[53.344603, -6.263371, 'FOWNES STREET UPPER'],
[53.340962, -6.262287, 'CHATHAM STREET'],
[53.348279, -6.254662, 'CUSTOM HOUSE'],
[53.344153, -6.233451, 'BENSON STREET'],
[53.341428, -6.24672, 'FENIAN STREET'],
[53.341833, -6.231291, 'SOUTH DOCK ROAD'],
[53.346867, -6.230852, 'THE POINT'],
[53.346026, -6.243576, 'LIME STREET'],
[53.342113, -6.310015, 'KILMAINHAM GAOL'],
[53.347932, -6.240928, 'GUILD STREET'],
[53.334432, -6.245575, 'HERBERT PLACE'],
[53.354929, -6.269425, 'WESTERN WAY'],
[53.337132, -6.26059, 'NEWMAN HOUSE'],
[53.350291, -6.273507, 'KING STREET NORTH'],
[53.335742, -6.24551, 'HERBERT STREET'],
[53.334019, -6.258371, 'EARLSFORT TERRACE'],
[53.340803, -6.267732, 'GOLDEN LANE'],
[53.351464, -6.255265, 'DEVERELL PLACE'],
[53.343105, -6.277167, 'JOHN STREET WEST'],
[53.346637, -6.246154, 'CITY QUAY'],
[53.343034, -6.263578, 'EXCHEQUER STREET'],
[53.33403, -6.260714, 'HATCH STREET'],
[53.330662, -6.260177, 'CHARLEMONT PLACE'],
[53.357043, -6.263232, 'HARDWICKE PLACE'],
[53.348875, -6.267459, 'WOLFE TONE STREET'],
[53.342081, -6.275233, 'FRANCIS STREET'],
[53.346874, -6.272976, 'GREEK STREET'],
[53.343565, -6.275071, 'HIGH STREET'],
[53.359624, -6.260348, 'NORTH CIRCULAR ROAD'],
[53.350974, -6.25294, 'TALBOT STREET'],
[53.339218, -6.240642, "SIR PATRICK DUN'S"],
[53.347122, -6.234749, 'NEW CENTRAL BANK'],
[53.347508, -6.252192, 'GEORGES QUAY'],
[53.341645, -6.29719, 'MOUNT BROWN'],
[53.343897, -6.29706, 'ROYAL HOSPITAL'],
[53.346603, -6.296924, 'HEUSTON STATION (CENTRAL)'],
[53.345922, -6.254614, 'TOWNSEND STREET'],
[53.330362, -6.265163, 'PORTOBELLO HARBOUR'],
[53.347884, -6.248048, 'CUSTOM HOUSE QUAY'],
[53.341288, -6.258117, 'MOLESWORTH STREET'],
[53.341805, -6.305085, 'KILMAINHAM LANE'],
[53.342296, -6.287661, 'MARKET STREET SOUTH'],
[53.337757, -6.267699, 'KEVIN STREET'],
[53.358115, -6.265601, 'ECCLES STREET EAST'],
[53.342638, -6.238695, 'GRAND CANAL DOCK'],
[53.339434, -6.246548, 'MERRION SQUARE EAST'],
[53.339334, -6.264699, 'YORK STREET WEST'],
[53.337494, -6.26199, "ST. STEPHEN'S GREEN SOUTH"],
[53.35561, -6.261397, 'DENMARK STREET GREAT'],
[53.346985, -6.297804, 'HEUSTON STATION (CAR PARK)'],
[53.337824, -6.256035, "ST. STEPHEN'S GREEN EAST"],
[53.359246, -6.269779, 'ECCLES STREET'],
[53.359967, -6.264828, 'MATER HOSPITAL'],
[53.356769, -6.26814, 'BLESSINGTON STREET'],
[53.339764, -6.251988, 'MERRION SQUARE WEST'],
[53.34744, -6.238523, 'CONVENTION CENTRE'],
[53.355473, -6.264423, 'HARDWICKE STREET'],
[53.347692, -6.278214, 'SMITHFIELD'],
[53.344007, -6.266802, 'DAME STREET'],
[53.345203, -6.247163, 'SANDWITH STREET'],
[53.349013, -6.260311, "PRINCES STREET / O'CONNELL STREET"],
[53.339629, -6.243778, 'GRATTAN STREET'],
[53.341359, -6.292951, 'ST JAMES HOSPITAL (LUAS)'],
[53.351182, -6.269859, 'BOLTON STREET'],
[53.347082, -6.264192, 'STRAND STREET GREAT'],
[53.341655, -6.236198, 'BARROW STREET'],
[53.356299, -6.258586, 'MOUNTJOY SQUARE WEST'],
[53.332383, -6.252717, 'WILTON TERRACE'],
[53.34218, -6.254485, 'LEINSTER STREET SOUTH'],
[53.343456, -6.287409, 'JAMES STREET'],
[53.347972, -6.291804, 'PARKGATE STREET'],
[53.347106, -6.292041, 'HEUSTON BRIDGE (SOUTH)'],
[53.352149, -6.260533, 'CATHAL BRUGHA STREET'],
[53.338776, -6.30395, 'ROTHE ABBEY'],
[53.358437, -6.260641, 'UPPER SHERRARD STREET'],
[53.335211, -6.2509, 'FITZWILLIAM SQUARE EAST'],
[53.332763, -6.257942, 'HARCOURT TERRACE'],
[53.3483, -6.266651, 'JERVIS STREET'],
[53.346057, -6.268001, 'ORMOND QUAY UPPER'],
[53.340714, -6.308191, 'EMMET ROAD'],
[53.347802, -6.292432, 'HEUSTON BRIDGE (NORTH)'],
[53.3488, -6.281637, 'BLACKHALL PLACE']
];
 var markers = [];
             
function initMap() {
var map = new google.maps.Map(document.getElementById('map'), {zoom: 14,center: {lat: 53.3498, lng: -6.2603}
});
setMarkers(map);
}
    
function setMarkers(map) {
  for (var i = 0; i < locations.length; i++) {
    var location = locations[i];
    var locationInfowindow = new google.maps.InfoWindow({
      content: '<div id=php_placeholder></div>',
    });
    var marker = new google.maps.Marker({
      position: {lat: location[0], lng: location[1]},
      map: map,
      title: location[2],
      infowindow: locationInfowindow
    });
    markers.push(marker);
      
/*<!--https://www.w3schools.com/jsref/jsref_push.asp-->*/
    google.maps.event.addListener(marker, 'click', function() {
      hideAllInfoWindows(map);
      this.infowindow.open(map, this);  
    });
      
      marker.addListener('click', markers_weather_click())
  }
}
function hideAllInfoWindows(map) {
   markers.forEach(function(marker) {
     marker.infowindow.close(map, marker);
  }); 
}
 function markers_weather_click() {
document.getElementById("articleright").style.display="inline-block";}
            
            
 </script>
             
         
    </body>
        
</html>